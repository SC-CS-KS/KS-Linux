# What Is I/O ?
```md
操作系统从上层到底层，各个层次之间均存在 I/O。
比如，CPU 有 I/O，内存有 I/O, VMM 有 I/O, 底层磁盘上也有 I/O，这是广义上的 I/O。
通常来讲，一个上层的 I/O 可能会产生针对磁盘的多个 I/O，
也就是说，上层的 I/O 是稀疏的，下层的 I/O 是密集的。
```
![](../z_pic/IO-layer.png)

* 文件系统—数据如何存放？
```md
对应了上图的File System 和 Buffer Cache。

File System（文件系统）：
解决了空间管理的问题，即：数据如何存放、读取。

Buffer Cache：
解决数据缓冲的问题。
对读，进行cache，即：缓存经常要用到的数据；对写，进行buffer，缓冲一定数据以后，一次性进行写入。
```
* VM—磁盘空间不足了怎么办？
```md
对应上图的Vol Mgmt。
VM 其实跟IO没有必然联系。他是处于文件系统和磁盘（存储）中间的一层。VM屏蔽了底层磁盘对上层文件系统的影响。

当没有VM的时候，文件系统直接使用存储上的地址空间，因此文件系统直接受限于物理硬盘，
这时如果发生磁盘空间不足的情况，对应用而言将是一场噩梦，不得不新增硬盘，然后重新进行数据复制。
而VM则可以实现动态扩展，而对文件系统没有影响。
另外，VM也可以把多个磁盘合并成一个磁盘，对文件系统呈现统一的地址空间，这个特性的杀伤力不言而喻。
```
* 存储—数据放在哪儿？如何访问？如何提高IO速度？
```md
对应上图的Device Driver、IO Channel 和 Disk Device
数据最终会放在这里，因此，效率、数据安全、容灾是这里需要考虑的问题。而提高存储的性能，则可以直接提高物理IO的性能。
```